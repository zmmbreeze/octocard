/*!
 octocard
 1.4.2
 08-12-2016
*/
!function(){var a,b,c,d="e3dfd93b0a15118dd0f9c73013a6b2e9",e=window.octocard&&window.octocard.octocard===d,f=document.getElementsByTagName("script"),g=f[f.length-1];if(g&&g.getAttribute("data-name"))c=!1,b=!0;else if("object"==typeof OCTOCARD&&OCTOCARD.name)c=!0,b=!0;else{if(e)return;b=!1}a={name:"",modules:"",theme:"",reposNum:"",reposIgnored:"",orgsNum:"",element:"",api:"",noIsolated:!1,noFooter:!1,themeCSS:""};for(var h in a)c?a[h]=OCTOCARD[h]:a[h]=g.getAttribute("data-"+h);if(b&&e)return!a.element&&document.getElementById("octocard")&&(a.element="octocard"+(new Date).getTime()),void window.octocard(a);var i=/(\d{4})-(\d{2})-(\d{2})T/,j={createStyle:function(a){var b=document.createElement("style");return b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),b},format:function(a,b,c){if(!b)return a;var d;if("object"!=typeof b){var e=c?b:"#{v}";return d=c||b,a.replace(new RegExp(e,"g"),""+d)}var f=b;return a.replace(c||/#\{([^{}]+)\}/g,function(a,b){return d=f[b],null==d?"":""+d})},jsonp:function(a,b,c){var d,e=document.createElement("script"),f="githubcardjsonp"+(new Date).getTime(),g=5e4,h=0,i=!1,j=a.match(/[?&]callback=([^$&]+)/);j?e.src=a.replace(/([?&]callback=)[^$&]+/,"$1"+f):e.src=a+(a.indexOf("?")===-1?"?":"&")+"callback="+f,e.type="text/javascript",e.charset="UTF-8",window[f]=function(a){return a.success?(i=!0,b(a.data),void(window[f]=null)):(c(a.message),void(i=!0))};var k=function(){!i&&c&&c("Server or network error."),e.onload=e.onreadystatechange=null,document.body.removeChild(e)};e.onload=e.onreadystatechange=function(){if(!h){var a=e.readyState;"undefined"!=typeof a&&"loaded"!=a&&"complete"!=a||(h=1,k(),clearTimeout(d))}},d=setTimeout(function(){k(),window[f]=function(){}},g),document.body.appendChild(e)},bind:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},resetTime:function(a){return a.setMilliseconds(0),a.setMinutes(0),a.setHours(0),a.setSeconds(0),a},today:function(){return j.resetTime(new Date)},nextDay:function(a){return new Date(a.getTime()+864e5)},tomorrow:function(){return j.nextDay(j.today())},strToDate:function(a){var b=a.match(i);return new Date(b[1],b[2]-1,b[3],0,0,0,0)},getPageHeight:function(a){var b="scrollHeight",c="offsetHeight",d=a.documentElement,e=a.body;return Math.max(e[b],e[c],d[b],d[c])},getShadowRoot:function(a){for(var b,c=["","webkit","moz","ms"],d=0,e=c.length;d<e;d++)if(b=this._getShadowRoot(a,c[d]))return b},_getShadowRoot:function(a,b){var c="createShadowRoot",d="shadowRoot";if(b&&(c=b+j.capitalize(c),d=b+j.capitalize(d)),"function"==typeof a[c]){var e=a[d];return e?(e.innerHTML="",e):(e=a[c](),e.resetStyleInheritance=!0,e)}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},addSizeClass:function(a,b){for(var c,d,e=a.offsetWidth,f=[0,240,480],g={480:"octocard-max",240:"octocard-mid",0:"octocard-min"},h=0;h<f.length&&(d=f[h],c=f[h+1],!(e>=d&&(e<c||!c)));h++);b.getAttribute("data-rule")!=d&&(b.className=b.className.replace(/(^| )octocard\-m[^ $]+/,"")+" "+g[d],b.setAttribute("data-rule",d))}},k='<div class="octocard-loading-inner"><div class="octocard-loading-0"></div><div class="octocard-loading-1"></div><div class="octocard-loading-2"></div></div>',l=function(a,b){this.element=a;var c=document.createElement("div");c.style.zIndex=b||9,c.className="octocard-loading",this.element.appendChild(c),this.root=c,c.innerHTML=k,this.highlightNum=2,this.start()};l.prototype.start=function(){var a=this.root.firstChild.childNodes,b=this;this.timer=setInterval(function(){var c=b.highlightNum;a[c].className="octocard-loading-"+c,b.highlightNum=c=(c+1)%3,a[c].className="octocard-loading-"+c+" octocard-loading-cur"},500)},l.prototype.stop=function(){clearInterval(this.timer)},l.prototype.end=function(){this.stop(),this.root&&(this.element.removeChild(this.root),delete this.root)};var m=function(a,b){return new l(a,b)},n={mods:{},get:function(a){return this.mods[a]},add:function(a,b){this.mods[a]=b}},o=function(a,b){var c=a.data.base;c.name&&c.name!==c.login?c._login=c.login:(c.name=c.name||c.login,c._nameClass="octocard-m-base-noname");var d=j.format(o.MOD_HTML,a.data.base);a.appendModHTML("base",d),b()};o.MOD_HTML='<a href="#{html_url}" target="_blank"><img src="#{avatar_url}" width="44" height="44"/><h1 class="#{_nameClass}">#{name}</h1><span>#{_login}</span></a>',n.add("base",o);var p=function(a,b){var c=a.data.base;if(c.email||c.blog||c.bio||c.location||c.company){var d="<ul>"+(c.email?"<li>"+c.email+"</li>":"")+(c.blog?'<li><a href="'+c.blog+'" target="_blank">'+c.blog+"</a></li>":"")+(c.bio?"<li>"+c.bio+"</li>":"")+(c.location?"<li>"+c.location+"</li>":"")+(c.company?"<li>"+c.company+"</li>":"")+"</ul>";a.appendModHTML("details",d)}b()};n.add("details",p);var q=function(a,b){var c=a.data.eventsStatis;if(0===c.length)return void b();for(var d,e,f,g=0,h=c.length-1,i=[],k=function(a){for(e=new Date(864e5+e.getTime());e<a;)i.push({date:e,counter:0}),e=new Date(864e5+e.getTime())};h>=0&&(d=c[h],g=Math.max(g,d.counter),e=j.strToDate(d.date),i.push({date:e,counter:d.counter}),0!==h);h--)f=j.strToDate(c[h-1].date),k(f);var l=j.tomorrow();k(l);var m="";h=i.length-1;for(var n=100/(h+1);h>=0;h--)d=i[h],m+=j.format(q.MOD_BAR_HTML,{date:d.date.toDateString(),counter:d.counter,width:n,height:d.counter/g*100,visibility:d.counter?"visible":"hidden"});a.appendModHTML("eventsStatis",j.format(q.MOD_HTML,{map:m})),b()};q.MOD_HTML='<h2>Events</h2><div class="octocard-m-eventsstatis-bd">#{map}</div><div class="octocard-m-eventsstatis-date"><span class="octocard-m-eventsstatis-date-end">Now</span></div>',q.MOD_BAR_HTML='<div class="octocard-m-eventsstatis-bar" style="width:#{width}%;"><div style="height:#{height}%;visibility:#{visibility};">#{date} - #{counter}</div></div>',n.add("eventsStatis",q);var r=function(a,b){var c=a.config.noFooter;if(c&&"false"!==c)return void b();var d=document.createElement("a");d.href="http://octocard.in/",d.target="_blank",d.className="octocard-footer",d.innerHTML="Octocard.in",a.element.appendChild(d),b()};n.add("footer",r);var s=function(a,b){var c=a.data.orgs;if(0===c.length)return void b();var d=parseInt(a.config.orgsNum,10)||-1;d>=0&&(c=c.slice(0,d));for(var e="",f=0,g=c.length;f<g;f++)e+=j.format(s.MOD_LI_HTML,c[f]);a.appendModHTML("orgs",j.format(s.MOD_HTML,e)),b()};s.MOD_HTML="<h2>Organizations</h2><ul>#{v}</ul>",s.MOD_LI_HTML='<li><a href="https://github.com/#{login}" target="_blank" title="#{login}"><img src="#{avatar_url}" alt="#{login}" height="32" width="32" /></a></li>',n.add("orgs",s);var t=function(a,b){var c,d;if(data=a.data.repos,0===data.length)return void b();data.sort(function(a,b){return b.watchers_count-a.watchers_count});var e=a.config.reposIgnored,f={};if(e)for(e=e.split(","),c=0,d=e.length;c<d;c++)f[e[c]]=1;var g,h=parseInt(a.config.reposNum,10)||3,i="<ul>";for(c=0,g=0,d=data.length;c<d&&g!==h;c++)f[data[c].name]||(g++,i+=j.format(t.MOD_LI_HTML,data[c]));i+="</ul>",a.appendModHTML("repos",i),b()};t.MOD_LI_HTML='<li><a href="#{html_url}" target="_blank"><h2>#{name}</h2><p>#{description}</p><span>#{watchers_count}&#10029;</span></a></li>',n.add("repos",t);var u=function(a,b){var c=j.format(u.MOD_HTML,a.data.base);a.appendModHTML("stats",c),b()};u.MOD_HTML='<ul><li><a target="_blank" href="#{html_url}/followers"><strong>#{followers}</strong><span>followers</span></a></li><li><a target="_blank" href="#{html_url}/following"><strong>#{following}</strong><span>following</span></a></li><li><a target="_blank" href="#{html_url}?tab=repositories"><strong>#{public_repos}</strong><span>repos</span></a></li><li><a target="_blank" href="https://gist.github.com/#{login}"><strong>#{public_gists}</strong><span>gists</span></a></li></ul>',n.add("stats",u);var v=function(a){this.reload(a)};v.prototype.reload=function(a){var b=this;b.host&&(b.host.innerHTML=""),a=a||{},b.config=a,a.api=a.api||location.protocol+"//octocard.in/api",b.element=a.element||"octocard","string"==typeof b.element?(b.elementId=b.element,b.element=document.getElementById(b.element),b.element||(b.element=document.createElement("div"),b.element.id=b.elementId,g.parentNode.insertBefore(b.element,g))):b.element.id?b.elementId=b.element.id:(b.elementId="octocard"+(new Date).getTime(),b.element.id=b.elementId),b.host=b.element,a.noIsolated&&"false"!==a.noIsolated||b._createContainer(),b._bindSizeClass(),b.createStyle(function(c){b.element.appendChild(c),b.username=a.name;var d=a.modules||"base,details,stats,repos,eventsStatis,orgs";d=d.split(","),d.unshift("footer"),b.setupModules(d)})},v.prototype._showErrorMsg=function(a,b){var c=document.createElement("div");if(c.className="octocard-error",c.innerHTML=a,b){var d=this,e=document.createElement("a");e.href="javascript:void(0)",e.innerHTML="Refresh",j.bind(e,"click",function(){d.element.removeChild(c),d._updateContainer(),d.setupModules(b)}),c.appendChild(e)}this.element.appendChild(c),this._updateContainer()},v.prototype.loadModule=function(a,b){var c=n.get(a);c&&c(this,b)},v.prototype.appendModHTML=function(a,b){var c=document.createElement("div");return c.className="octocard-m octocard-m-"+a.toLowerCase(),c.innerHTML=b,this.element.appendChild(c),c},v.prototype.createStyle=function(a){var b=this,c=b.config.themeCSS,d=function(a,c){return j.createStyle(j.format(a,"#root-id","#"+b.elementId))};if(c)return void a(d(c,b.elementId));var e=b.config.theme;j.jsonp(b.config.api+"?dataType=theme&name="+(e||""),function(c){a(d(c.css,b.elementId))},function(a){b._showErrorMsg(a)})},v.prototype.setupModules=function(a,b){function c(c){function f(){d.loadModule(a[g],function(){g++,g<h?f():(e&&e.end(),d._updateContainer(),b&&b())})}d.data=c;var g=0,h=a.length;f()}var d=this;if(d.config.data)return void c(d.config.data);var e=m(this.element);d._updateContainer(),j.jsonp(this.config.api+"?mods="+a.join(",")+"&login="+this.username,c,function(b){e&&e.end(),d._showErrorMsg(b,a)})},v.prototype._createContainer=function(){var a=document.createElement("div");this.elementId+=(new Date).getTime(),a.id=this.elementId;var b=j.getShadowRoot(this.element);if(b)b.appendChild(a);else{var c=document.createElement("iframe");c.style.cssText="width:100%;height:0;position:relative;top:0;left:0;right:0;bottom:0;display:block;padding:0;margin:0;border:none;",c.frameBorder="0",this.element.appendChild(c);var d=c.contentDocument||c.contentWindow.document;d.open(),d.write(""),d.close(),d.body.style.cssText="overflow:hidden;margin:0;padding:0;",d.body.appendChild(a),this.doc=d,this.iframe=c}this.isIsolated=!0,this.element=a},v.prototype._updateContainer=function(){if(this.iframe){var a=navigator.userAgent;if(a.match(/iPhone/i)||a.match(/iPad/i)){var b=this.iframe.parentNode.offsetWidth;this.doc.body.style.width=b+"px"}var c=j.getPageHeight(this.doc);this.iframe.style.height=c+"px"}},v.prototype._bindSizeClass=function(){var a=this;if(j.addSizeClass(a.host,a.element),!a._binded){a._binded=!0;var b;j.bind(window,"resize",function(){b&&clearTimeout(b),b=setTimeout(function(){j.addSizeClass(a.host,a.element)},250)})}},window.octocard=function(a){return new v(a)},window.octocard.octocard=d,b&&new v(a)}();